# Section49: YelpCamp: 재구성 및 플래시

## 캠프그라운드 경로 빠져나오기

우선 라우트를 여러 개의 파일로 나눠보자.  
app.js에 캠핑장 라우트 파일과 리뷰 라우트 파일이 있을 것이다.
캠핑장 라우트 부분을 따로 분리해서 파일로 만들어서 app.js 에 라우트로 적용시킨다.

## 리뷰 경로 빠져나오기

이번엔 리뷰 라우트들을 분리해서 파일로 만들어 app.js 에 라우트로 적용시킨다.

## 정적 Assets 서비스

public 디렉터리를 추가하고 정적 애셋을 제공하면 이미지나 커스텀 스타일 시트로 응답하거나 JavaScript 파일로 등답할 수 있다.

## 세션 구성하기

플래시 메시지를 만들기 위해서, 그리고 인증을 추가하기 위해 express-session 패키지를 설치한다.  
cookie의 옵션 중에서 httpOnly 옵션은 쿠키에 httpOnly 플래그가 뜨면 클라이언트 측 스크립트에서 해당 쿠키에 접근할 수 없고, XSS에 결함이 있거나 사용자가 결함을 일으키는 링크에 접근하면 브라우저가 제 3자에게 쿠키를 유출하지 않도록 한다. 우리가 추가할 수 있는 간단한 보안 코드이다.

## 플래시 설정하기

우선 connect-flash 패키지를 설치한다.  
작동 원리는 req.flash에 키-값 쌍을 전달해 플래시를 생성하는 것이다.

## Flash_Success 파셜

파일을 분할하고 플래시를 사용해서 꾸며보자. 부트스트랩을 이용한다.
app.js에 미들웨어로 만들어서 항상 success 값에 접근할 수 있게 한다.  
views/partials 폴더에 flash.ejs 파일을 만드는데 이것이 플래시 템플릿이다.  
boilerplate.ejs 에 플래시 템플릿을 적용하고 사용할 라우터에 적용시켜 준다.

## Flash_Error 파셜
